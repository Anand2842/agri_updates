@import "tailwindcss";
@plugin "@tailwindcss/typography";

@theme {
  --font-sans: var(--font-sans);
  --font-serif: var(--font-serif);

  /* Newspaper Color Palette */
  --color-agri-green: #059669;
  --color-agri-dark: #064E3B;
  --color-paper-bg: #FAFAF9;
  /* Warm off-white */
  --color-ink-black: #1C1917;
  /* Rich black for text */
  --color-border-thin: #E7E5E4;
  /* Subtle dividers */
}

@layer base {
  html {
    scroll-behavior: smooth;
    overflow-x: hidden;
  }

  body {
    @apply font-sans antialiased text-ink-black bg-paper-bg selection:bg-agri-green/20 selection:text-agri-dark;
    overflow-x: hidden;
    max-width: 100vw;
  }

  /* Golden Ratio (1.618) Type Scale 
     Base: 16px (1rem)
     Ratio: 1.618
  */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-sans tracking-tight font-bold text-agri-dark;
  }

  h1 {
    font-size: clamp(2.5rem, 5vw, 4.25rem);
    /* ~40px to ~68px */
    line-height: 1.1;
  }

  h2 {
    font-size: clamp(2rem, 4vw, 2.625rem);
    /* ~32px to ~42px */
    line-height: 1.2;
  }

  h3 {
    font-size: clamp(1.5rem, 3vw, 1.625rem);
    /* ~24px to ~26px */
    line-height: 1.3;
  }

  h4 {
    font-size: 1.25rem;
    /* 20px - tweaked for utility */
    line-height: 1.4;
  }

  p {
    line-height: 1.6;
    margin-bottom: 1rem;
  }

  /* Newspaper-style thin borders - Keeping for legacy but updating usage */
  .newspaper-border {
    @apply border-ink-black;
  }

  .newspaper-border-thin {
    @apply border-border-thin;
  }

  /* Section Headers */
  .section-header {
    @apply text-xs font-bold uppercase tracking-[0.2em] text-stone-500 mb-4 pb-2 border-b border-ink-black;
  }

  .section-header-green {
    @apply bg-agri-green text-white text-center text-[10px] font-bold uppercase tracking-[0.2em] py-2 px-4;
  }

  /* Custom Scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-stone-300 rounded-full hover:bg-agri-green transition-colors;
  }
}

/* Global Content Layout Helpers */
.container-reading {
  @apply max-w-[75ch] mx-auto;
}

/* Newspaper Card Styles - Updated for 8pt Grid */
.newspaper-card {
  @apply border border-border-thin bg-white p-6 transition-all hover:border-stone-300;
}

.newspaper-card-minimal {
  @apply py-6 border-b border-border-thin last:border-b-0;
}

/* Category Badge */
.category-badge {
  @apply inline-block text-[10px] font-bold uppercase tracking-widest text-agri-green border-b border-agri-green pb-0.5;
}

/* Responsive Prose Heading Sizes - MUST ALLOW WRAPPING */
.prose h1,
.prose h2 {
  word-break: normal;
  overflow-wrap: normal;
  hyphens: none;
  font-family: var(--font-sans);
  /* Ensuring Inter */
}

.prose h1 {
  /* Inherit base H1 or override */
  font-size: clamp(2.5rem, 5vw, 4.25rem);
  margin-top: 2rem;
  margin-bottom: 1rem;
}

.prose h2 {
  font-size: clamp(2rem, 4vw, 2.625rem);
  margin-top: 2rem;
  margin-bottom: 1rem;
}

.prose h3 {
  font-size: clamp(1.5rem, 3vw, 1.625rem);
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
}

/* Prevent prose content from overflowing but keep words whole */
.prose {
  max-width: 75ch;
  /* Enforce reading width */
  margin-left: auto;
  margin-right: auto;
  word-break: normal !important;
  overflow-wrap: normal !important;
  hyphens: none !important;
  text-align: left;
}

/* CRITICAL: Override all child elements to prevent mid-word breaking */
.prose * {
  word-break: normal !important;
  overflow-wrap: normal !important;
  hyphens: none !important;
}

/* Ensure links break if they are too long */
.prose a {
  word-break: break-all;
  overflow-wrap: anywhere;
}

/* Tables must scroll horizontally if too wide */
.prose table {
  display: block;
  overflow-x: auto;
  max-width: 100%;
}

/* Code blocks must scroll horizontally if too wide */
.prose pre {
  overflow-x: auto;
  max-width: 100%;
}

/* Ensure list items don't overflow but respect word boundaries */
.prose ul,
.prose ol {
  max-width: 100%;
  word-break: normal !important;
  overflow-wrap: normal !important;
}

.prose li {
  max-width: 100%;
  word-break: normal !important;
  overflow-wrap: normal !important;
}

/* Ensure all headings handle long text properly */
h1,
h2,
h3,
h4,
h5,
h6 {
  max-width: 100%;
  word-wrap: break-word;
}

@media (min-width: 640px) {
  .prose h1 {
    font-size: 2rem;
  }

  .prose h2 {
    font-size: 1.5rem;
  }
}

@media (min-width: 768px) {
  .prose h1 {
    font-size: 2.5rem;
  }

  .prose h2 {
    font-size: 1.75rem;
  }
}

/* Editor Specific Styling */
.ql-editor h2 {
  margin-top: 2rem !important;
  margin-bottom: 1rem !important;
  font-weight: 700;
  color: var(--color-agri-dark);
}

.ql-editor h3 {
  margin-top: 1.5rem !important;
  margin-bottom: 0.75rem !important;
  font-weight: 600;
}

.ql-editor p {
  margin-bottom: 1rem !important;
  line-height: 1.75;
}

.ql-editor ul {
  margin-bottom: 1.5rem !important;
  padding-left: 1.5rem !important;
  list-style-type: disc;
}

.ql-editor li {
  margin-bottom: 0.5rem !important;
}

.ql-editor table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 2rem;
  margin-bottom: 2rem;
  font-size: 0.9em;
}

.ql-editor td,
.ql-editor th {
  border: 1px solid var(--color-border-thin);
  padding: 12px;
  text-align: left;
}

.ql-editor th {
  background-color: #f5f5f4;
  font-weight: bold;
}